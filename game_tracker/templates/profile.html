<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{ profile_user.username }} ‚Äî –ü—Ä–æ—Ñ–∏–ª—å</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

<div class="box">

    <!-- –ù–∞–∑–∞–¥ -->
    <div class="nav-links">
        <a href="/">‚¨Ö –ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>

    <!-- üé• –ü—Ä–æ—Ñ–∏–ª—å —Å—Ç—Ä–∏–º–µ—Ä–∞ -->
    <div class="profile-center">

        <img class="profile-avatar"
             src="{{ avatar_url or url_for('static', filename='default.png') }}"
             alt="avatar">

        <h1 class="profile-name">
            {{ profile_user.username }}
        </h1>

        <!-- –°—Ç–∞—Ç—É—Å -->
        {% if twitch_status == "Online" %}
            <p class="twitch-status online">‚óè Online</p>
        {% else %}
            <p class="twitch-status offline">‚óè Offline</p>
        {% endif %}

        <p class="subtitle">
            –ü—É–±–ª–∏—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–≥—Ä —Å—Ç—Ä–∏–º–µ—Ä–∞
        </p>

    </div>

    <!-- üîç –ü–æ–∏—Å–∫ -->
    <div class="search-box">
        <input type="text"
               id="profileSearch"
               placeholder="üîç –ü–æ–∏—Å–∫ –∏–≥—Ä—ã —É —Å—Ç—Ä–∏–º–µ—Ä–∞...">
    </div>

    <hr>

    <!-- ‚úÖ –ü–†–û–ô–î–ï–ù–û -->
    <h2 class="section-title">
    üéÆ –ü—Ä–æ–π–¥–µ–Ω–æ ({{ done_games|length }})
</h2>

<ul class="game-list">

    <!-- –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 5 -->
    {% for game in done_games[:5] %}
        <li class="game-card game-item">

            {% if game.image_url %}
                <img src="{{ game.image_url }}" alt="–û–±–ª–æ–∂–∫–∞">
            {% else %}
                <div class="no-cover">No Cover</div>
            {% endif %}

            <span class="game-title">{{ game.title }}</span>

        </li>
    {% endfor %}

</ul>

<!-- –µ—Å–ª–∏ –∏–≥—Ä –±–æ–ª—å—à–µ 5 -->
{% if done_games|length > 5 %}
    <details class="game-section">
        <summary class="show-more">
             –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∏–≥—Ä—ã
        </summary>

        <ul class="game-list">
            {% for game in done_games[5:] %}
                <li class="game-card game-item">

                    {% if game.image_url %}
                        <img src="{{ game.image_url }}" alt="–û–±–ª–æ–∂–∫–∞">
                    {% else %}
                        <div class="no-cover">No Cover</div>
                    {% endif %}

                    <span class="game-title">{{ game.title }}</span>

                </li>
            {% endfor %}
        </ul>
    </details>
{% endif %}



    <hr>

    <!-- ‚ùå –î–†–û–ü -->
    <h2 class="section-title">
    üíÄ –î—Ä–æ–ø ({{ drop_games|length }})
</h2>

<ul class="game-list">

    {% for game in drop_games[:5] %}
        <li class="game-card game-item">

            {% if game.image_url %}
                <img src="{{ game.image_url }}" alt="–û–±–ª–æ–∂–∫–∞">
            {% else %}
                <div class="no-cover">No Cover</div>
            {% endif %}

            <span class="game-title">{{ game.title }}</span>

        </li>
    {% endfor %}

</ul>

{% if drop_games|length > 5 %}
    <details class="game-section">
        <summary class="show-more">
             –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥—Ä–æ–ø–Ω—É—Ç—ã–µ –∏–≥—Ä—ã
        </summary>

        <ul class="game-list">
            {% for game in drop_games[5:] %}
                <li class="game-card game-item">

                    {% if game.image_url %}
                        <img src="{{ game.image_url }}" alt="–û–±–ª–æ–∂–∫–∞">
                    {% else %}
                        <div class="no-cover">No Cover</div>
                    {% endif %}

                    <span class="game-title">{{ game.title }}</span>

                </li>
            {% endfor %}
        </ul>
    </details>
{% endif %}



    <hr>

    <!-- ‚è≥ –û–ß–ï–†–ï–î–¨ -->
    <h2 class="section-title">
    ‚è≥ –í –æ—á–µ—Ä–µ–¥–∏ ({{ queue_games|length }})
</h2>

<ul class="game-list">

    {% for game in queue_games[:5] %}
        <li class="game-card game-item">

            {% if game.image_url %}
                <img src="{{ game.image_url }}" alt="–û–±–ª–æ–∂–∫–∞">
            {% else %}
                <div class="no-cover">No Cover</div>
            {% endif %}

            <span class="game-title">{{ game.title }}</span>

        </li>
    {% endfor %}

</ul>

{% if queue_games|length > 5 %}
    <details class="game-section">
        <summary class="show-more">
             –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å—é –æ—á–µ—Ä–µ–¥—å
        </summary>

        <ul class="game-list">
            {% for game in queue_games[5:] %}
                <li class="game-card game-item">

                    {% if game.image_url %}
                        <img src="{{ game.image_url }}" alt="–û–±–ª–æ–∂–∫–∞">
                    {% else %}
                        <div class="no-cover">No Cover</div>
                    {% endif %}

                    <span class="game-title">{{ game.title }}</span>

                </li>
            {% endfor %}
        </ul>
    </details>
{% endif %}



</div>

<!-- üî• JS –ü–æ–∏—Å–∫ -->
<script>
    const searchInput = document.getElementById("profileSearch");

    searchInput.addEventListener("keyup", function () {

        let filter = searchInput.value.toLowerCase();
        let games = document.querySelectorAll(".game-item");

        games.forEach(function (game) {

            let title = game.innerText.toLowerCase();

            if (title.includes(filter)) {
                game.style.display = "flex";
            } else {
                game.style.display = "none";
            }

        });

    });
</script>

</body>
</html>
